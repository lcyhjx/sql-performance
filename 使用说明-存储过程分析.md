# 如何运行存储过程性能分析

## 快速开始

1. **确保Python环境已安装pyodbc**
   ```bash
   pip install pyodbc
   ```

2. **运行分析脚本**
   ```bash
   cd d:\Lakin\project\sql-performance
   python analyze_stored_procedures.py
   ```

3. **查看报告**
   - 控制台会显示实时进度和摘要
   - 详细JSON报告：`performance_report.json`
   - 中文分析报告：`存储过程性能分析报告.md`

## 配置说明

如果需要修改数据库连接信息，编辑 `analyze_stored_procedures.py` 文件中的配置：

```python
DB_CONFIG = {
    'server': '127.0.0.1,5433',
    'database': 'Statistics-CT-test',
    'username': 'sa',
    'password': '123456',
    'driver': None  # 自动检测
}
```

## 输出文件

- `performance_report.json` - 详细的JSON格式性能数据
- `存储过程性能分析报告.md` - 中文分析报告（可读性更好）

## 运行时间

根据数据库中存储过程的数量和复杂度，分析可能需要：
- 本次分析（185个存储过程）：约3-5分钟
- 每个存储过程平均：1-2秒

## 注意事项

- 所有存储过程都使用NULL参数执行
- 某些依赖链接服务器的��储过程可能会失败
- 建议在非生产时间运行，以避免对数据库造成负载